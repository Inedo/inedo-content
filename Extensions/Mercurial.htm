<!DOCTYPE html> 
<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Mercurial Extension | Support | Inedo.com</title>
    </head>
   <body>
        <div>
            <p>
                Since <a href="http://mercurial.selenic.com/">Mercurial</a> is a free, distributed source control management tool,
                BuildMaster can either connect to a local repository, or connect to a remote repository in order to function as a source control provider.
                This extension includes a <a href="/support/documentation/buildmaster/toolset-integration/source-control">Source Control Provider</a> for Mercurial.
            </p>

            <h2>Install Mercurial and the Mercurial BuildMaster Extension</h2>
            <p>
                In order to integrate with Mercurial, BuildMaster requires that the hg executable is installed on either the BuildMaster server,
                or whatever server you are going to use as your build server. To install Mercurial, visit:
                <a title="http://mercurial.selenic.com/downloads/" href="http://mercurial.selenic.com/downloads/">http://mercurial.selenic.com/downloads/</a>
            </p>
            <p>
                Once Mercurial is installed, you can add the Mercurial source control provider. To create the provider, follow the
                <a href="/support/documentation/buildmaster/buildmaster-administration/toolset-integration/source-control">
                    "Creating a Source Control Provider" section of the documentation
                </a> until the example provider configuration is shown.
            </p>

            <h2>Connecting to a Local or Remote Repository</h2>
            <p>
                BuildMaster's Mercurial integration allows you to connect to either a local repository, or a remote/hosted repository such as BitBucket or Kiln.
                To consume a local repository that is already configured on a server accessible from BuildMaster or a BuildMaster agent,
                simply enter a local repository path. To connect a hosted service, simply enter a remote repository URL and if required,
                include the HTTP basic authentication credentials in the URL. For example, <h6>https://username:password@bitbucket.org/account/repositoryName</h6>.
                If you have an "at symbol" (@) in the username (such as for Kiln accounts which use email addresses),
                make sure to URI encode the symbol in the username as <i>"%40"</i>, e.g.
                <h6>https://user%40example.com:password@account.kilnhg.com/Code/Repositories/Group/repositoryName</h6>.
            </p>
            <p>
                The final configuration will look similar to this:
            </p>
            <p>
                <img class="screenshot" alt="" src="/resources/extensions/integrating-mercurial.png" />
            </p>
            <p>
                Once you click on Test Connection, you should see a "Connection Successful" message, and you have successfully set up the
                Mercurial Source Control Provider and may use it within any deployment plan.
            </p>
            <p>
                You can have multiple repositories associated with a single Mercurial provider, so for example if you have 1 local repository for your
                team's internal development and 1 repository hosted on BitBucket, you can add both of them on this configuration page and you will select
                the appropriate one as part of the source control path when performing a Get Latest or other source control action.
            </p>

            <h2>Path Formatting and Branches</h2>
            <p>
                Mercurial paths in BuildMaster follow the format: <br /><strong>{RepositoryName}|{BranchName}:{RelativePath}</strong>
            </p>
            <p>
                As an example, the Source Path of <strong>bitbucket.org_inedo_mercurial|branch1:</strong> represents the root directory of the
                "branch1" branch in the "bitbucket.org_inedo_mercurial" repository.
            </p>
            <p>
                The path components may be replaced with variables at build time to build from specific branches. For example,
                if you add a Build or Release variable named BRANCH-NAME, you can pull from a variable branch if you specify the
                following Source Path in the Get Latest/Labeled actions: <strong>bitbucket.org_inedo_mercurial|%BRANCH-NAME%:</strong>
            </p>

            <h2>Tagging in Mercurial - Applying a Label to a Source Path</h2>
            <p>
                While Mercurial supports the concept of tags, if you with to apply a tag during a BuildMaster build execution,
                you must use the <strong>Apply Label</strong> action - not the Tag action. BuildMaster's definition of tagging is
                meant for Subversion which creates a different path structure for each tag and is handled uniquely from all DVCS providers.
            </p>

            <h2>Source Code</h2>
            <p>
                The source code for the Mercurial integration is available on GitHub:
                <a title="https://github.com/Inedo/bmx-mercurial" href="https://github.com/Inedo/bmx-mercurial">https://github.com/Inedo/bmx-mercurial</a>
            </p>
            
        </div>
	</body>
</html>


